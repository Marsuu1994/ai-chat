<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Plan Form Redesign — Collapsible Groups</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    background: #f0f0f0; color: #161616; min-height: 100vh; padding: 32px; padding-bottom: 80px;
  }

  /* ── Screen layout ── */
  .screen { display: none; max-width: 640px; margin: 0 auto; }
  .screen.active { display: block; }

  .screen-label {
    font-size: 11px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.12em; margin-bottom: 12px; color: #45aeee;
    display: flex; align-items: center; gap: 8px;
  }
  .screen-label.muted { color: #999; }
  .screen-label::after { content: ''; flex: 1; height: 1px; background: #ddd; }

  .frame {
    background: #fff; border-radius: 16px; border: 1px solid #dedede;
    overflow: hidden; box-shadow: 0 2px 12px rgba(0,0,0,0.04);
  }

  /* ── Screen nav ── */
  .screen-nav {
    position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
    display: flex; gap: 6px; background: #fff; padding: 6px 10px;
    border-radius: 12px; border: 1px solid #dedede; z-index: 200;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
  }
  .screen-btn {
    padding: 7px 14px; border-radius: 8px; font-size: 12px; font-weight: 600;
    border: 1px solid #dedede; background: transparent; color: #999; cursor: pointer;
  }
  .screen-btn:hover { background: #f5f5f5; }
  .screen-btn.active { background: rgba(69,174,238,0.1); color: #45aeee; border-color: #45aeee; }

  /* ── Header ── */
  .hdr {
    padding: 14px 20px; border-bottom: 1px solid #eee;
    display: flex; align-items: center; gap: 10px;
  }
  .hdr-back { width: 24px; height: 24px; color: #888; display: flex; align-items: center; justify-content: center; }
  .hdr-title { font-size: 15px; font-weight: 700; }
  .hdr-title span { color: #45aeee; }
  .hdr-badge {
    font-size: 10px; font-weight: 600; padding: 3px 10px; border-radius: 999px;
    background: rgba(233,63,51,0.1); color: #e93f33;
  }

  /* ── Form body ── */
  .form-body { padding: 24px 20px; }
  .form-body h2 { font-size: 20px; font-weight: 700; margin-bottom: 20px; }
  .fg { margin-bottom: 16px; }
  .fg label { font-size: 12px; font-weight: 500; color: #999; display: block; margin-bottom: 5px; }
  .fg input[type="text"] {
    width: 100%; padding: 9px 12px; border: 1px solid #dedede; border-radius: 8px;
    font-size: 13px; color: #161616; outline: none; background: #fafafa;
  }

  .sec-btn {
    font-size: 11px; font-weight: 600; padding: 5px 12px; border-radius: 6px;
    border: 1px solid #dedede; background: #fff; color: #888; cursor: pointer;
  }
  .star-icon { width: 11px; height: 11px; display: inline; vertical-align: -1px; }
  .ck-svg { width: 12px; height: 12px; }

  /* ── Footer ── */
  .form-foot {
    display: flex; align-items: center; justify-content: space-between;
    margin-top: 24px; padding-top: 16px; border-top: 1px solid #eee;
  }
  .foot-summary { font-size: 12px; color: #888; }
  .foot-summary b { color: #45aeee; font-weight: 600; }
  .foot-actions { display: flex; gap: 8px; }
  .btn-cancel {
    padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 500;
    border: 1px solid #dedede; background: transparent; color: #888; cursor: pointer;
  }
  .btn-submit {
    padding: 8px 18px; border-radius: 8px; font-size: 13px; font-weight: 600;
    border: none; background: linear-gradient(135deg, #45aeee, #6bc4f5); color: #fff;
    cursor: pointer; display: flex; align-items: center; gap: 5px;
  }

  /* ═══════════════════════════════════════════
     BEFORE styles
     ═══════════════════════════════════════════ */
  .sec-hdr {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 10px; margin-top: 20px;
  }
  .sec-label { font-size: 12px; font-weight: 500; color: #999; }
  .sec-count {
    font-size: 10px; font-weight: 600; padding: 2px 8px; border-radius: 999px;
    background: rgba(197,184,0,0.15); color: #8a7e00;
  }
  .old-list { display: flex; flex-direction: column; gap: 8px; }
  .old-item {
    display: flex; flex-direction: column; padding: 12px;
    background: #f5f5f5; border: 1px solid #dedede; border-radius: 8px;
  }
  .old-item.selected { border-color: #45aeee; background: rgba(69,174,238,0.04); }
  .old-row { display: flex; align-items: center; gap: 10px; }
  .old-check {
    width: 17px; height: 17px; border-radius: 4px; border: 2px solid #bbb;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  }
  .old-item.selected .old-check { background: #45aeee; border-color: #45aeee; }
  .old-name { font-size: 13px; font-weight: 500; flex: 1; }
  .old-pts { font-size: 11px; font-weight: 700; color: #ee8134; display: flex; align-items: center; gap: 2px; }
  .old-edit { color: #bbb; flex-shrink: 0; }
  .old-config {
    border-top: 1px solid #dedede; margin-top: 10px; padding-top: 10px;
    display: flex; align-items: center; gap: 6px;
  }
  .old-config-label { font-size: 10px; color: #888; flex-shrink: 0; }
  .old-pill {
    padding: 3px 8px; font-size: 10px; font-weight: 700; border-radius: 999px;
    border: 1px solid #dedede; color: #888; letter-spacing: 0.04em;
  }
  .old-pill.active-daily { background: rgba(75,168,192,0.12); border-color: #4ba8c0; color: #4ba8c0; }
  .old-pill.active-weekly { background: rgba(232,72,138,0.12); border-color: #e8488a; color: #e8488a; }
  .old-divider { width: 1px; height: 14px; background: #dedede; }
  .old-freq {
    width: 40px; padding: 3px 6px; border: 1px solid #dedede; border-radius: 5px;
    font-size: 12px; text-align: center; color: #161616; background: #fff;
  }
  .old-freq-unit { font-size: 11px; color: #888; }
  .old-adhoc {
    display: flex; align-items: center; gap: 10px; padding: 12px;
    background: #f5f5f5; border: 1px solid #dedede; border-radius: 8px;
  }
  .old-adhoc.selected { border-color: #45aeee; background: rgba(69,174,238,0.04); }
  .old-adhoc.selected .old-check { background: #45aeee; border-color: #45aeee; }
  .old-adhoc-status {
    font-size: 9px; font-weight: 600; padding: 2px 6px; border-radius: 999px;
    background: #f0f0f0; color: #999; text-transform: uppercase;
  }

  /* ═══════════════════════════════════════════
     AFTER styles
     ═══════════════════════════════════════════ */

  /* ── Tab bar ── */
  .section-tabs {
    display: flex; gap: 0; margin-top: 20px; border-bottom: 1.5px solid #eee;
  }
  .section-tab {
    padding: 8px 16px 10px; font-size: 12px; font-weight: 600; color: #aaa;
    cursor: pointer; border: none; background: none; position: relative;
    display: flex; align-items: center; gap: 5px; transition: color 0.15s;
  }
  .section-tab:hover { color: #666; }
  .section-tab.active { color: #161616; }
  .section-tab.active::after {
    content: ''; position: absolute; bottom: -1.5px; left: 0; right: 0;
    height: 2px; background: #45aeee; border-radius: 2px;
  }
  .tab-count {
    font-size: 10px; font-weight: 700; padding: 1px 6px; border-radius: 999px;
    background: #f0f0f0; color: #999;
  }
  .section-tab.active .tab-count { background: rgba(69,174,238,0.1); color: #45aeee; }
  .tab-panel { display: none; padding-top: 10px; }
  .tab-panel.active { display: block; }

  /* ── Search bar ── */
  .search-bar {
    display: flex; align-items: center; gap: 8px;
    padding: 7px 12px; border: 1px solid #eee; border-radius: 8px;
    background: #fafafa;
  }
  .search-bar.has-query { border-color: #45aeee; background: #fff; }
  .search-bar svg { width: 14px; height: 14px; color: #bbb; flex-shrink: 0; }
  .search-bar.has-query svg { color: #45aeee; }
  .search-bar input {
    border: none; background: none; outline: none; font-size: 12px; color: #161616;
    flex: 1; font-family: inherit;
  }
  .search-bar input::placeholder { color: #bbb; }
  .search-clear {
    width: 18px; height: 18px; border-radius: 50%; border: none;
    background: #eee; color: #888; font-size: 11px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    line-height: 1; font-weight: 700;
  }
  .search-clear:hover { background: #ddd; }

  .top-action-row {
    display: flex; align-items: center; gap: 8px; margin-bottom: 8px;
  }
  .top-action-row .search-bar { flex: 1; }

  /* ── Group ── */
  .group { margin-bottom: 4px; }
  .group-header {
    display: flex; align-items: center; gap: 6px;
    padding: 8px 8px; border-radius: 6px; cursor: pointer;
    user-select: none; transition: background 0.15s;
  }
  .group-header:hover { background: #f7f7f7; }
  .group-chevron {
    width: 16px; height: 16px; color: #bbb; flex-shrink: 0; transition: transform 0.2s;
  }
  .group.collapsed .group-chevron { transform: rotate(-90deg); }
  .group-name { font-size: 12px; font-weight: 600; color: #161616; flex: 1; }
  .group-meta { font-size: 10px; color: #aaa; font-weight: 500; }
  .group-meta b { color: #45aeee; font-weight: 700; }
  .group-body { padding-left: 4px; }
  .group.collapsed .group-body { display: none; }

  /* ── Template item ── */
  .t-item {
    display: flex; flex-direction: column; padding: 8px 8px 8px 12px;
    border-radius: 6px; transition: background 0.15s; cursor: pointer;
  }
  .t-item:hover { background: #f7f7f7; }
  .t-item.selected { background: rgba(69,174,238,0.04); }
  .t-row { display: flex; align-items: center; gap: 10px; }
  .t-check {
    width: 17px; height: 17px; border-radius: 5px; border: 2px solid #ccc;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
    transition: all 0.15s;
  }
  .t-item.selected .t-check { background: #45aeee; border-color: #45aeee; }
  .t-name {
    font-size: 13px; font-weight: 500; flex: 1; min-width: 0;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  }
  .t-item:not(.selected) .t-name { color: #888; }
  .t-pts {
    font-size: 11px; font-weight: 700; color: #ee8134;
    display: flex; align-items: center; gap: 2px; flex-shrink: 0;
    min-width: 28px; justify-content: flex-end;
  }
  .t-item:not(.selected) .t-pts { color: #ccc; }
  .t-edit {
    color: #ccc; flex-shrink: 0; cursor: pointer; padding: 2px;
    border-radius: 4px; opacity: 0; transition: opacity 0.15s;
  }
  .t-item:hover .t-edit { opacity: 1; color: #999; }
  .t-item:not(.selected) .t-edit { display: none; }

  /* ── Config row ── */
  .t-config {
    margin-top: 6px; padding-top: 6px; border-top: 1px solid #eee;
    display: flex; align-items: center; gap: 6px; margin-left: 27px;
  }
  .t-item:not(.selected) .t-config { display: none; }
  .t-config-label { font-size: 10px; color: #aaa; flex-shrink: 0; }
  .t-pill {
    padding: 3px 8px; font-size: 10px; font-weight: 700; border-radius: 999px;
    border: 1px solid #eee; color: #bbb; letter-spacing: 0.04em; cursor: pointer;
    background: transparent; transition: all 0.15s;
  }
  .t-pill:hover { border-color: #ccc; }
  .t-pill.active-daily { background: rgba(75,168,192,0.12); border-color: #4ba8c0; color: #4ba8c0; }
  .t-pill.active-weekly { background: rgba(232,72,138,0.12); border-color: #e8488a; color: #e8488a; }
  .t-divider { width: 1px; height: 14px; background: #eee; }
  .t-freq {
    width: 36px; padding: 3px 4px; border: 1px solid #eee; border-radius: 5px;
    font-size: 12px; text-align: center; color: #161616; background: #fafafa;
    outline: none; transition: border-color 0.15s;
  }
  .t-freq:focus { border-color: #45aeee; }
  .t-freq-unit { font-size: 11px; color: #aaa; }

  /* ── Ad-hoc items ── */
  .adhoc-item {
    display: flex; align-items: center; gap: 10px; padding: 10px 12px;
    border-radius: 8px; cursor: pointer; transition: background 0.15s;
  }
  .adhoc-item:hover { background: #f7f7f7; }
  .adhoc-item.selected { background: rgba(69,174,238,0.04); }
  .adhoc-item .t-check { border-color: #ccc; }
  .adhoc-item.selected .t-check { background: #45aeee; border-color: #45aeee; }
  .adhoc-name { font-size: 13px; font-weight: 500; flex: 1; }
  .adhoc-item:not(.selected) .adhoc-name { color: #888; }
  .adhoc-status {
    font-size: 9px; font-weight: 600; padding: 2px 6px; border-radius: 999px;
    background: #f0f0f0; color: #999; text-transform: uppercase; letter-spacing: 0.04em;
  }

  /* ── Search result: highlighted match ── */
  .match-hl { background: rgba(69,174,238,0.18); border-radius: 2px; padding: 0 1px; }

  /* ── Search result: category tag ── */
  .cat-tag {
    font-size: 9px; font-weight: 600; color: #aaa; background: #f3f3f3;
    padding: 1px 6px; border-radius: 4px; flex-shrink: 0; letter-spacing: 0.03em;
  }

  /* ── Search result count ── */
  .search-result-count {
    font-size: 11px; color: #aaa; padding: 4px 12px 8px; font-weight: 500;
  }
  .search-result-count b { color: #45aeee; font-weight: 700; }

  /* ── No results ── */
  .no-results {
    padding: 32px 16px; text-align: center; color: #bbb; font-size: 13px;
  }
  .no-results svg { width: 32px; height: 32px; margin-bottom: 8px; color: #ddd; }

  /* ── Notes ── */
  .design-notes {
    margin-top: 48px; padding: 20px 24px; background: #fff;
    border-radius: 12px; border: 1px solid #dedede;
    max-width: 640px; margin-left: auto; margin-right: auto;
  }
  .design-notes h3 { font-size: 14px; font-weight: 700; margin-bottom: 12px; }
  .design-notes ul { padding-left: 18px; font-size: 13px; color: #555; line-height: 1.8; }
  .design-notes li { margin-bottom: 4px; }
  .design-notes code { font-size: 12px; background: #f3f3f3; padding: 1px 5px; border-radius: 4px; color: #e8488a; }
</style>
</head>
<body>

<!-- ══ SCREEN NAV ══ -->
<div class="screen-nav">
  <button class="screen-btn active" onclick="showScreen('before')">Before</button>
  <button class="screen-btn" onclick="showScreen('after')">After — Default</button>
  <button class="screen-btn" onclick="showScreen('search')">After — Search</button>
</div>

<!-- ══════════════════════════════════════════
     SCREEN 1: BEFORE
     ══════════════════════════════════════════ -->
<div class="screen active" id="screen-before">
  <div class="screen-label muted">Before — Current Layout</div>
  <div class="frame">
    <div class="hdr">
      <div class="hdr-back"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><polyline points="15 18 9 12 15 6"/></svg></div>
      <span class="hdr-title"><span>Kanban</span> Planner</span>
      <span class="hdr-badge">Planning Mode</span>
    </div>
    <div class="form-body">
      <h2>Update Weekly Plan</h2>
      <div class="fg">
        <label>Description (optional)</label>
        <input type="text" value="Get back to job searching speed" />
      </div>
      <div class="sec-hdr">
        <span class="sec-label">Task Templates</span>
        <button class="sec-btn">+ New Template</button>
      </div>
      <div class="old-list">
        <div class="old-item selected">
          <div class="old-row">
            <div class="old-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
            <span class="old-name">Workout session</span>
            <span class="old-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
            <span class="old-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#bbb" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
          </div>
          <div class="old-config"><span class="old-config-label">Type</span><span class="old-pill">DAILY</span><span class="old-pill active-weekly">WEEKLY</span><div class="old-divider"></div><span class="old-config-label">Freq</span><input class="old-freq" value="2" /><span class="old-freq-unit">/ week</span></div>
        </div>
        <div class="old-item selected">
          <div class="old-row">
            <div class="old-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
            <span class="old-name">System Design Case Study</span>
            <span class="old-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
            <span class="old-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#bbb" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
          </div>
          <div class="old-config"><span class="old-config-label">Type</span><span class="old-pill">DAILY</span><span class="old-pill active-weekly">WEEKLY</span><div class="old-divider"></div><span class="old-config-label">Freq</span><input class="old-freq" value="2" /><span class="old-freq-unit">/ week</span></div>
        </div>
        <div class="old-item selected">
          <div class="old-row">
            <div class="old-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
            <span class="old-name">Solve 4 leetcode</span>
            <span class="old-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 4</span>
            <span class="old-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#bbb" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
          </div>
          <div class="old-config"><span class="old-config-label">Type</span><span class="old-pill active-daily">DAILY</span><span class="old-pill">WEEKLY</span><div class="old-divider"></div><span class="old-config-label">Freq</span><input class="old-freq" value="1" /><span class="old-freq-unit">/ day</span></div>
        </div>
        <div class="old-item selected">
          <div class="old-row">
            <div class="old-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
            <span class="old-name">Work on personal project</span>
            <span class="old-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
            <span class="old-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#bbb" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
          </div>
          <div class="old-config"><span class="old-config-label">Type</span><span class="old-pill active-daily">DAILY</span><span class="old-pill">WEEKLY</span><div class="old-divider"></div><span class="old-config-label">Freq</span><input class="old-freq" value="1" /><span class="old-freq-unit">/ day</span></div>
        </div>
        <div class="old-item selected">
          <div class="old-row">
            <div class="old-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
            <span class="old-name">Resume Update</span>
            <span class="old-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
            <span class="old-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#bbb" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
          </div>
          <div class="old-config"><span class="old-config-label">Type</span><span class="old-pill">DAILY</span><span class="old-pill active-weekly">WEEKLY</span><div class="old-divider"></div><span class="old-config-label">Freq</span><input class="old-freq" value="1" /><span class="old-freq-unit">/ week</span></div>
        </div>
        <div class="old-item selected">
          <div class="old-row">
            <div class="old-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
            <span class="old-name">Behavior Question Prep</span>
            <span class="old-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
            <span class="old-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#bbb" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
          </div>
          <div class="old-config"><span class="old-config-label">Type</span><span class="old-pill">DAILY</span><span class="old-pill active-weekly">WEEKLY</span><div class="old-divider"></div><span class="old-config-label">Freq</span><input class="old-freq" value="2" /><span class="old-freq-unit">/ week</span></div>
        </div>
        <div class="old-item">
          <div class="old-row"><div class="old-check"></div><span class="old-name" style="color:#888">Read</span><span class="old-pts" style="color:#ccc"><svg class="star-icon" viewBox="0 0 24 24" fill="#ddd"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 2</span></div>
        </div>
        <div class="old-item">
          <div class="old-row"><div class="old-check"></div><span class="old-name" style="color:#888">Morning Exercise</span><span class="old-pts" style="color:#ccc"><svg class="star-icon" viewBox="0 0 24 24" fill="#ddd"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 3</span></div>
        </div>
      </div>
      <div class="sec-hdr" style="margin-top:24px"><span class="sec-label">Ad-hoc Tasks</span><span class="sec-count">1 task</span></div>
      <div class="old-list">
        <div class="old-adhoc selected">
          <div class="old-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
          <span class="old-name">File Tax Report</span>
          <span class="old-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 15</span>
          <span class="old-adhoc-status">TODO</span>
        </div>
      </div>
      <div class="form-foot">
        <span class="foot-summary"><b>6</b> templates, <b>1</b> ad-hoc task selected</span>
        <div class="foot-actions"><button class="btn-cancel">Cancel</button><button class="btn-submit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 13l4 4L19 7" stroke-linecap="round"/></svg> Update Plan</button></div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════════════════════════════════════
     SCREEN 2: AFTER — DEFAULT (groups)
     ══════════════════════════════════════════ -->
<div class="screen" id="screen-after">
  <div class="screen-label">After — Default (Collapsible Groups)</div>
  <div class="frame">
    <div class="hdr">
      <div class="hdr-back"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><polyline points="15 18 9 12 15 6"/></svg></div>
      <span class="hdr-title"><span>Kanban</span> Planner</span>
      <span class="hdr-badge">Planning Mode</span>
    </div>
    <div class="form-body">
      <h2>Update Weekly Plan</h2>
      <div class="fg">
        <label>Description (optional)</label>
        <input type="text" value="Get back to job searching speed" />
      </div>
      <div class="section-tabs">
        <button class="section-tab active">Templates <span class="tab-count">8</span></button>
        <button class="section-tab">Ad-hoc <span class="tab-count">1</span></button>
      </div>
      <div class="tab-panel active">
        <div class="top-action-row">
          <div class="search-bar">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35" stroke-linecap="round"/></svg>
            <input type="text" placeholder="Search templates..." />
          </div>
          <button class="sec-btn">+ New</button>
        </div>

        <!-- Group: Fitness -->
        <div class="group" id="g2-fitness">
          <div class="group-header" onclick="toggleGroup2('fitness')">
            <svg class="group-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span class="group-name">Fitness</span>
            <span class="group-meta"><b>1</b> of 3 selected</span>
          </div>
          <div class="group-body">
            <div class="t-item selected">
              <div class="t-row">
                <div class="t-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                <span class="t-name">Workout session</span>
                <span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
                <span class="t-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
              </div>
              <div class="t-config"><span class="t-config-label">Type</span><button class="t-pill">DAILY</button><button class="t-pill active-weekly">WEEKLY</button><div class="t-divider"></div><span class="t-config-label">Freq</span><input class="t-freq" value="2" /><span class="t-freq-unit">/ week</span></div>
            </div>
            <div class="t-item"><div class="t-row"><div class="t-check"></div><span class="t-name">Morning Exercise</span><span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ddd"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 3</span></div></div>
            <div class="t-item"><div class="t-row"><div class="t-check"></div><span class="t-name">Evening yoga</span><span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ddd"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 3</span></div></div>
          </div>
        </div>

        <!-- Group: Interview Prep -->
        <div class="group" id="g2-interview">
          <div class="group-header" onclick="toggleGroup2('interview')">
            <svg class="group-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span class="group-name">Interview Prep</span>
            <span class="group-meta"><b>3</b> of 4 selected</span>
          </div>
          <div class="group-body">
            <div class="t-item selected">
              <div class="t-row">
                <div class="t-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                <span class="t-name">System Design Case Study</span>
                <span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
                <span class="t-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
              </div>
              <div class="t-config"><span class="t-config-label">Type</span><button class="t-pill">DAILY</button><button class="t-pill active-weekly">WEEKLY</button><div class="t-divider"></div><span class="t-config-label">Freq</span><input class="t-freq" value="2" /><span class="t-freq-unit">/ week</span></div>
            </div>
            <div class="t-item selected">
              <div class="t-row">
                <div class="t-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                <span class="t-name">Solve 4 leetcode</span>
                <span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 4</span>
                <span class="t-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
              </div>
              <div class="t-config"><span class="t-config-label">Type</span><button class="t-pill active-daily">DAILY</button><button class="t-pill">WEEKLY</button><div class="t-divider"></div><span class="t-config-label">Freq</span><input class="t-freq" value="1" /><span class="t-freq-unit">/ day</span></div>
            </div>
            <div class="t-item selected">
              <div class="t-row">
                <div class="t-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
                <span class="t-name">Behavior Question Prep</span>
                <span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
                <span class="t-edit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
              </div>
              <div class="t-config"><span class="t-config-label">Type</span><button class="t-pill">DAILY</button><button class="t-pill active-weekly">WEEKLY</button><div class="t-divider"></div><span class="t-config-label">Freq</span><input class="t-freq" value="2" /><span class="t-freq-unit">/ week</span></div>
            </div>
            <div class="t-item"><div class="t-row"><div class="t-check"></div><span class="t-name">Mock interview practice</span><span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ddd"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 8</span></div></div>
          </div>
        </div>

        <!-- Group: Personal Dev (collapsed) -->
        <div class="group collapsed" id="g2-personal">
          <div class="group-header" onclick="toggleGroup2('personal')">
            <svg class="group-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span class="group-name">Personal Dev</span>
            <span class="group-meta"><b>2</b> of 3 selected</span>
          </div>
          <div class="group-body">
            <div class="t-item selected"><div class="t-row"><div class="t-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div><span class="t-name">Work on personal project</span><span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span></div><div class="t-config"><span class="t-config-label">Type</span><button class="t-pill active-daily">DAILY</button><button class="t-pill">WEEKLY</button><div class="t-divider"></div><span class="t-config-label">Freq</span><input class="t-freq" value="1" /><span class="t-freq-unit">/ day</span></div></div>
            <div class="t-item selected"><div class="t-row"><div class="t-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div><span class="t-name">Resume Update</span><span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span></div><div class="t-config"><span class="t-config-label">Type</span><button class="t-pill">DAILY</button><button class="t-pill active-weekly">WEEKLY</button><div class="t-divider"></div><span class="t-config-label">Freq</span><input class="t-freq" value="1" /><span class="t-freq-unit">/ week</span></div></div>
            <div class="t-item"><div class="t-row"><div class="t-check"></div><span class="t-name">Read</span><span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ddd"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 2</span></div></div>
          </div>
        </div>
      </div>

      <div class="form-foot">
        <span class="foot-summary"><b>6</b> templates, <b>1</b> ad-hoc task selected</span>
        <div class="foot-actions"><button class="btn-cancel">Cancel</button><button class="btn-submit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 13l4 4L19 7" stroke-linecap="round"/></svg> Update Plan</button></div>
      </div>
    </div>
  </div>
</div>

<!-- ══════════════════════════════════════════
     SCREEN 3: AFTER — SEARCH ACTIVE
     ══════════════════════════════════════════ -->
<div class="screen" id="screen-search">
  <div class="screen-label">After — Search Active (query: "work")</div>
  <div class="frame">
    <div class="hdr">
      <div class="hdr-back"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16"><polyline points="15 18 9 12 15 6"/></svg></div>
      <span class="hdr-title"><span>Kanban</span> Planner</span>
      <span class="hdr-badge">Planning Mode</span>
    </div>
    <div class="form-body">
      <h2>Update Weekly Plan</h2>
      <div class="fg">
        <label>Description (optional)</label>
        <input type="text" value="Get back to job searching speed" />
      </div>
      <div class="section-tabs">
        <button class="section-tab active">Templates <span class="tab-count">8</span></button>
        <button class="section-tab">Ad-hoc <span class="tab-count">1</span></button>
      </div>
      <div class="tab-panel active">
        <!-- Search bar with active query -->
        <div class="top-action-row">
          <div class="search-bar has-query">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35" stroke-linecap="round"/></svg>
            <input type="text" value="work" />
            <button class="search-clear">&times;</button>
          </div>
          <button class="sec-btn">+ New</button>
        </div>

        <!-- Search result count -->
        <div class="search-result-count"><b>2</b> results across all categories</div>

        <!-- Flat filtered list — groups replaced by category tags -->
        <!-- Result 1: selected, from Personal Dev -->
        <div class="t-item selected">
          <div class="t-row">
            <div class="t-check"><svg class="ck-svg" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
            <span class="t-name"><span class="match-hl">Work</span> on personal project</span>
            <span class="cat-tag">Personal Dev</span>
            <span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
            <span class="t-edit" style="opacity:1;color:#999"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke-linecap="round"/><path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke-linecap="round"/></svg></span>
          </div>
          <div class="t-config">
            <span class="t-config-label">Type</span>
            <button class="t-pill active-daily">DAILY</button>
            <button class="t-pill">WEEKLY</button>
            <div class="t-divider"></div>
            <span class="t-config-label">Freq</span>
            <input class="t-freq" value="1" />
            <span class="t-freq-unit">/ day</span>
          </div>
        </div>

        <!-- Result 2: unselected, from Fitness -->
        <div class="t-item">
          <div class="t-row">
            <div class="t-check"></div>
            <span class="t-name"><span class="match-hl">Work</span>out session</span>
            <span class="cat-tag">Fitness</span>
            <span class="t-pts"><svg class="star-icon" viewBox="0 0 24 24" fill="#ddd"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg> 5</span>
          </div>
        </div>
      </div>

      <div class="form-foot">
        <span class="foot-summary"><b>6</b> templates, <b>1</b> ad-hoc task selected</span>
        <div class="foot-actions"><button class="btn-cancel">Cancel</button><button class="btn-submit"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 13l4 4L19 7" stroke-linecap="round"/></svg> Update Plan</button></div>
      </div>
    </div>
  </div>
</div>

<!-- Design Notes -->
<div class="design-notes">
  <h3>Search Behavior</h3>
  <ul>
    <li><strong>Flat results</strong> — When a search query is active, group headers disappear. Results are shown as a flat filtered list, sorted by relevance. A small <code>category tag</code> appears on each row so users still know which group it belongs to.</li>
    <li><strong>Highlighted matches</strong> — The matching portion of the template name is highlighted with a subtle blue background.</li>
    <li><strong>Result count</strong> — A "<b>N</b> results across all categories" line appears below the search bar to provide feedback.</li>
    <li><strong>Clear button</strong> — An <code>&times;</code> button appears in the search bar when text is present. Clicking it clears the query and returns to the grouped view.</li>
    <li><strong>Selected state preserved</strong> — Selected templates still show the config row and checkmark in search results. Toggling selection works the same as in the grouped view.</li>
    <li><strong>Search bar visual state</strong> — When a query is active, the search bar border turns blue and the icon changes color to reinforce that filtering is active.</li>
    <li><strong>Footer unchanged</strong> — The summary footer always shows the global count regardless of search filter.</li>
  </ul>
</div>

<script>
function showScreen(name) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById('screen-' + name).classList.add('active');
  document.querySelectorAll('.screen-btn').forEach(b => b.classList.remove('active'));
  event.currentTarget.classList.add('active');
}
function toggleGroup2(name) {
  document.getElementById('g2-' + name).classList.toggle('collapsed');
}
</script>
</body>
</html>
