<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Task Modal v2 — With Category Field</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    background: #f0f0f0; color: #161616; min-height: 100vh;
    padding: 32px; padding-bottom: 80px;
  }

  /* ── Screen layout ── */
  .screen { display: none; max-width: 560px; margin: 0 auto; }
  .screen.active { display: block; }

  .screen-label {
    font-size: 11px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.12em; margin-bottom: 12px; color: #45aeee;
    display: flex; align-items: center; gap: 8px;
  }
  .screen-label::after { content: ''; flex: 1; height: 1px; background: #ddd; }

  /* ── Screen nav ── */
  .screen-nav {
    position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
    display: flex; gap: 6px; background: #fff; padding: 6px 10px;
    border-radius: 12px; border: 1px solid #dedede; z-index: 200;
    box-shadow: 0 8px 32px rgba(0,0,0,0.1);
  }
  .screen-btn {
    padding: 7px 14px; border-radius: 8px; font-size: 12px; font-weight: 600;
    border: 1px solid #dedede; background: transparent; color: #999; cursor: pointer;
  }
  .screen-btn:hover { background: #f5f5f5; }
  .screen-btn.active { background: rgba(69,174,238,0.1); color: #45aeee; border-color: #45aeee; }

  /* ── Modal frame ── */
  .modal {
    background: #fff; border: 1px solid #dedede; border-radius: 16px;
    box-shadow: 0 25px 60px rgba(0,0,0,0.12);
    overflow: hidden;
  }
  .modal-header {
    padding: 20px 24px; border-bottom: 1px solid #eee;
    display: flex; align-items: center; justify-content: space-between;
  }
  .modal-title { font-size: 17px; font-weight: 700; color: #161616; }
  .modal-close {
    background: none; border: none; cursor: pointer; color: #bbb; padding: 4px;
    border-radius: 6px; display: flex; align-items: center; justify-content: center;
    transition: color 0.15s, background 0.15s;
  }
  .modal-close:hover { color: #888; background: #f5f5f5; }
  .modal-body { padding: 20px 24px; }
  .modal-footer {
    padding: 16px 24px; border-top: 1px solid #eee;
    display: flex; justify-content: flex-end; gap: 8px;
  }

  /* ── Form ── */
  .fg { margin-bottom: 16px; }
  .fg label {
    font-size: 12px; font-weight: 500; color: #888; display: block; margin-bottom: 5px;
  }
  .fg label .req { color: #e93f33; }
  .fg label .hint { font-size: 11px; color: #bbb; font-weight: 400; margin-left: 4px; }
  .fg input, .fg textarea, .fg select {
    width: 100%; padding: 9px 12px; border: 1px solid #dedede; border-radius: 8px;
    font-size: 13px; color: #161616; outline: none; background: #fafafa;
    font-family: inherit; transition: border-color 0.15s;
  }
  .fg input:focus, .fg textarea:focus, .fg select:focus { border-color: #45aeee; background: #fff; }
  .fg textarea { resize: vertical; }
  .fg .sub-hint { font-size: 11px; color: #bbb; margin-top: 4px; }

  /* ── Points input with star icon ── */
  .pts-input-wrap { position: relative; }
  .pts-input-wrap input { padding-left: 32px; }
  .pts-input-wrap svg {
    width: 16px; height: 16px; position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
  }

  /* ── Category: combobox-style input ── */
  .cat-input-wrap { position: relative; }
  .cat-input-wrap input {
    padding-right: 32px;
  }
  .cat-chevron {
    position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
    width: 14px; height: 14px; color: #bbb; pointer-events: none;
  }

  /* Category dropdown (static mockup) */
  .cat-dropdown {
    position: absolute; top: calc(100% + 4px); left: 0; right: 0;
    background: #fff; border: 1px solid #dedede; border-radius: 10px;
    box-shadow: 0 12px 32px rgba(0,0,0,0.1); z-index: 10;
    padding: 4px; display: none;
  }
  .cat-dropdown.open { display: block; }
  .cat-option {
    padding: 8px 12px; border-radius: 6px; font-size: 13px; color: #161616;
    cursor: pointer; transition: background 0.1s;
    display: flex; align-items: center; gap: 8px;
  }
  .cat-option:hover { background: #f5f5f5; }
  .cat-option.selected { background: rgba(69,174,238,0.06); }
  .cat-option .cat-check {
    width: 14px; height: 14px; border-radius: 3px; border: 1.5px solid #ccc;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  }
  .cat-option.selected .cat-check { background: #45aeee; border-color: #45aeee; }
  .cat-option .cat-label { flex: 1; }
  .cat-option .cat-count { font-size: 10px; color: #bbb; }
  .cat-divider { height: 1px; background: #eee; margin: 4px 8px; }
  .cat-new {
    padding: 8px 12px; border-radius: 6px; font-size: 13px; color: #45aeee;
    cursor: pointer; transition: background 0.1s; font-weight: 500;
    display: flex; align-items: center; gap: 6px;
  }
  .cat-new:hover { background: rgba(69,174,238,0.06); }
  .cat-new svg { width: 14px; height: 14px; }

  /* ── Row layout ── */
  .form-row { display: flex; gap: 12px; }
  .form-row .fg { flex: 1; }

  /* ── Buttons ── */
  .btn {
    padding: 9px 18px; border-radius: 8px; font-size: 13px; font-weight: 600;
    border: none; cursor: pointer; display: inline-flex; align-items: center; gap: 5px;
  }
  .btn-ghost { background: transparent; color: #888; border: 1px solid #dedede; }
  .btn-ghost:hover { background: #f5f5f5; }
  .btn-primary {
    background: linear-gradient(135deg, #45aeee, #6bc4f5); color: #fff;
    box-shadow: 0 0 20px rgba(69,174,238,0.15);
  }

  /* ── Ad-hoc banner ── */
  .adhoc-banner {
    display: flex; align-items: center; gap: 8px;
    background: rgba(197,184,0,0.08); color: #8a7e00;
    font-size: 12px; padding: 10px 14px; border-radius: 8px; margin-bottom: 16px;
  }
  .adhoc-banner svg { flex-shrink: 0; width: 16px; height: 16px; }

  /* ── Notes ── */
  .design-notes {
    margin-top: 48px; padding: 20px 24px; background: #fff;
    border-radius: 12px; border: 1px solid #dedede;
    max-width: 560px; margin-left: auto; margin-right: auto;
  }
  .design-notes h3 { font-size: 14px; font-weight: 700; margin-bottom: 12px; }
  .design-notes ul { padding-left: 18px; font-size: 13px; color: #555; line-height: 1.8; }
  .design-notes li { margin-bottom: 4px; }
  .design-notes code { font-size: 12px; background: #f3f3f3; padding: 1px 5px; border-radius: 4px; color: #e8488a; }
</style>
</head>
<body>

<!-- ══ SCREEN NAV ══ -->
<div class="screen-nav">
  <button class="screen-btn active" onclick="showScreen('create')">Create Template</button>
  <button class="screen-btn" onclick="showScreen('edit')">Edit Template</button>
  <button class="screen-btn" onclick="showScreen('cat-open')">Category Dropdown</button>
  <button class="screen-btn" onclick="showScreen('adhoc')">Ad-hoc Task</button>
</div>

<!-- ══════════════════════════════════════════
     SCREEN 1: CREATE TEMPLATE
     ══════════════════════════════════════════ -->
<div class="screen active" id="screen-create">
  <div class="screen-label">Create Task Template</div>
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title">Create Task Template</div>
      <button class="modal-close">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M18 6L6 18M6 6l12 12" stroke-linecap="round"/></svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="fg">
        <label>Title <span class="req">*</span></label>
        <input type="text" placeholder="e.g. Solve 3 LeetCode problems" />
      </div>
      <div class="fg">
        <label>Description <span class="hint">(used by AI for task generation)</span></label>
        <textarea rows="3" placeholder="e.g. Focus on dynamic programming and graph problems."></textarea>
      </div>
      <div class="form-row">
        <div class="fg">
          <label>Category</label>
          <div class="cat-input-wrap">
            <input type="text" placeholder="e.g. Fitness, Interview Prep" />
            <svg class="cat-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <div class="sub-hint">Group templates for easier planning</div>
        </div>
        <div class="fg" style="max-width: 120px">
          <label>Points <span class="req">*</span></label>
          <div class="pts-input-wrap">
            <input type="number" placeholder="10" />
            <svg viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost">Cancel</button>
      <button class="btn btn-primary">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15"><path d="M12 5v14m-7-7h14" stroke-linecap="round"/></svg>
        Create Template
      </button>
    </div>
  </div>
</div>

<!-- ══════════════════════════════════════════
     SCREEN 2: EDIT TEMPLATE
     ══════════════════════════════════════════ -->
<div class="screen" id="screen-edit">
  <div class="screen-label">Edit Task Template</div>
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title">Edit Task Template</div>
      <button class="modal-close">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M18 6L6 18M6 6l12 12" stroke-linecap="round"/></svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="fg">
        <label>Title <span class="req">*</span></label>
        <input type="text" value="Go to gym" />
      </div>
      <div class="fg">
        <label>Description <span class="hint">(used by AI for task generation)</span></label>
        <textarea rows="3">30 min workout focusing on compound lifts</textarea>
      </div>
      <div class="form-row">
        <div class="fg">
          <label>Category</label>
          <div class="cat-input-wrap">
            <input type="text" value="Fitness" />
            <svg class="cat-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
        </div>
        <div class="fg" style="max-width: 120px">
          <label>Points <span class="req">*</span></label>
          <div class="pts-input-wrap">
            <input type="number" value="6" />
            <svg viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost">Cancel</button>
      <button class="btn btn-primary">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15"><path d="M5 13l4 4L19 7" stroke-linecap="round"/></svg>
        Save Changes
      </button>
    </div>
  </div>
</div>

<!-- ══════════════════════════════════════════
     SCREEN 3: CATEGORY DROPDOWN OPEN
     ══════════════════════════════════════════ -->
<div class="screen" id="screen-cat-open">
  <div class="screen-label">Category Dropdown — Open State</div>
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title">Create Task Template</div>
      <button class="modal-close">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M18 6L6 18M6 6l12 12" stroke-linecap="round"/></svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="fg">
        <label>Title <span class="req">*</span></label>
        <input type="text" value="System Design Case Study" />
      </div>
      <div class="fg">
        <label>Description <span class="hint">(used by AI for task generation)</span></label>
        <textarea rows="2">Practice designing large-scale distributed systems</textarea>
      </div>
      <div class="form-row">
        <div class="fg">
          <label>Category</label>
          <div class="cat-input-wrap">
            <input type="text" value="" placeholder="Search or create..." style="border-color:#45aeee;background:#fff" />
            <svg class="cat-chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="transform:translateY(-50%) rotate(180deg)"><path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <!-- Dropdown -->
            <div class="cat-dropdown open">
              <div class="cat-option">
                <div class="cat-check"></div>
                <span class="cat-label">Fitness</span>
                <span class="cat-count">3 templates</span>
              </div>
              <div class="cat-option selected">
                <div class="cat-check">
                  <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="3"><path d="M20 6L9 17l-5-5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <span class="cat-label">Interview Prep</span>
                <span class="cat-count">4 templates</span>
              </div>
              <div class="cat-option">
                <div class="cat-check"></div>
                <span class="cat-label">Personal Dev</span>
                <span class="cat-count">3 templates</span>
              </div>
              <div class="cat-option">
                <div class="cat-check"></div>
                <span class="cat-label">Reading</span>
                <span class="cat-count">2 templates</span>
              </div>
              <div class="cat-divider"></div>
              <div class="cat-new">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14m-7-7h14" stroke-linecap="round"/></svg>
                Create new category...
              </div>
            </div>
          </div>
        </div>
        <div class="fg" style="max-width: 120px">
          <label>Points <span class="req">*</span></label>
          <div class="pts-input-wrap">
            <input type="number" value="5" />
            <svg viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost">Cancel</button>
      <button class="btn btn-primary">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15"><path d="M12 5v14m-7-7h14" stroke-linecap="round"/></svg>
        Create Template
      </button>
    </div>
  </div>
</div>

<!-- ══════════════════════════════════════════
     SCREEN 4: AD-HOC TASK (no category field)
     ══════════════════════════════════════════ -->
<div class="screen" id="screen-adhoc">
  <div class="screen-label">Add Ad-hoc Task (no category)</div>
  <div class="modal">
    <div class="modal-header">
      <div class="modal-title">Add Ad-hoc Task</div>
      <button class="modal-close">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M18 6L6 18M6 6l12 12" stroke-linecap="round"/></svg>
      </button>
    </div>
    <div class="modal-body">
      <div class="adhoc-banner">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" stroke-linecap="round" stroke-linejoin="round"/></svg>
        Ad-hoc tasks are one-off items — they don't repeat and never expire.
      </div>
      <div class="fg">
        <label>Title <span class="req">*</span></label>
        <input type="text" placeholder="e.g. File tax report" />
      </div>
      <div class="fg">
        <label>Description</label>
        <textarea rows="3" placeholder="Optional details about this task"></textarea>
      </div>
      <div class="fg">
        <label>Points <span class="req">*</span></label>
        <div class="pts-input-wrap">
          <input type="number" value="1" />
          <svg viewBox="0 0 24 24" fill="#ee8134"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26"/></svg>
        </div>
        <div class="sub-hint">Points earned on completion</div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-ghost">Cancel</button>
      <button class="btn btn-primary">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="15" height="15"><path d="M12 5v14m-7-7h14" stroke-linecap="round"/></svg>
        Add to Board
      </button>
    </div>
  </div>
</div>

<!-- Design Notes -->
<div class="design-notes">
  <h3>Task Modal v2 Changes</h3>
  <ul>
    <li><strong>New Category field</strong> — Added to Create and Edit template modes. Uses a combobox-style input: click to open a dropdown of existing categories, or type to search/filter. "Create new category..." option at the bottom.</li>
    <li><strong>Category + Points on same row</strong> — Category and Points sit side-by-side to save vertical space. Points field is fixed-width (120px), category takes the remaining space.</li>
    <li><strong>Dropdown shows template counts</strong> — Each category option shows how many templates it contains (e.g. "3 templates"), helping users understand the distribution.</li>
    <li><strong>Selected state</strong> — The currently assigned category shows a blue checkmark in the dropdown.</li>
    <li><strong>Ad-hoc mode unchanged</strong> — Ad-hoc tasks don't have categories (they're one-off items, not grouped templates), so the category field is absent.</li>
    <li><strong>Category is optional</strong> — No asterisk on the field. Templates without a category would appear in an "Uncategorized" group in the plan form.</li>
    <li><strong>Schema impact</strong> — Adds optional <code>category: String?</code> to <code>TaskTemplate</code> model.</li>
  </ul>
</div>

<script>
function showScreen(name) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById('screen-' + name).classList.add('active');
  document.querySelectorAll('.screen-btn').forEach(b => b.classList.remove('active'));
  event.currentTarget.classList.add('active');
}
</script>
</body>
</html>
